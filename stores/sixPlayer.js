import { defineStore } from 'pinia';
import {getMoves6P, getPiece, lerpBg} from "~/utils/sixPlayer";
import {arrHasArr} from "~/utils/utils";

export const useSixPlayerStore = defineStore('sixPlayer', {
    state: () => ({
        defaultBoard: [
            {
                "q": -10,
                "r": 1,
                "p": "B1"
            },
            {
                "q": -10,
                "r": 2,
                "p": "N1"
            },
            {
                "q": -10,
                "r": 3,
                "p": "B1"
            },
            {
                "q": -10,
                "r": 4,
                "p": "Q1"
            },
            {
                "q": -10,
                "r": 5,
                "p": "K1"
            },
            {
                "q": -10,
                "r": 6,
                "p": "R1"
            },
            {
                "q": -10,
                "r": 7,
                "p": "N1"
            },
            {
                "q": -10,
                "r": 8,
                "p": "R1"
            },
            {
                "q": -9,
                "r": 1,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 2,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 3,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 4,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 5,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 6,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 7,
                "p": "P1"
            },
            {
                "q": -9,
                "r": 10,
                "p": "B0"
            },
            {
                "q": -8,
                "r": -2,
                "p": "R2"
            },
            {
                "q": -8,
                "r": 0,
                "p": ""
            },
            {
                "q": -8,
                "r": 1,
                "p": ""
            },
            {
                "q": -8,
                "r": 2,
                "p": ""
            },
            {
                "q": -8,
                "r": 3,
                "p": ""
            },
            {
                "q": -8,
                "r": 4,
                "p": ""
            },
            {
                "q": -8,
                "r": 5,
                "p": ""
            },
            {
                "q": -8,
                "r": 6,
                "p": ""
            },
            {
                "q": -8,
                "r": 7,
                "p": ""
            },
            {
                "q": -8,
                "r": 8,
                "p": ""
            },
            {
                "q": -8,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -8,
                "r": 10,
                "p": "N0"
            },
            {
                "q": -7,
                "r": -3,
                "p": "N2"
            },
            {
                "q": -7,
                "r": -2,
                "p": "P2"
            },
            {
                "q": -7,
                "r": -1,
                "p": ""
            },
            {
                "q": -7,
                "r": 0,
                "p": ""
            },
            {
                "q": -7,
                "r": 1,
                "p": ""
            },
            {
                "q": -7,
                "r": 2,
                "p": ""
            },
            {
                "q": -7,
                "r": 3,
                "p": ""
            },
            {
                "q": -7,
                "r": 4,
                "p": ""
            },
            {
                "q": -7,
                "r": 5,
                "p": ""
            },
            {
                "q": -7,
                "r": 6,
                "p": ""
            },
            {
                "q": -7,
                "r": 7,
                "p": ""
            },
            {
                "q": -7,
                "r": 8,
                "p": ""
            },
            {
                "q": -7,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -7,
                "r": 10,
                "p": "R0"
            },
            {
                "q": -6,
                "r": -4,
                "p": "B2"
            },
            {
                "q": -6,
                "r": -3,
                "p": "P2"
            },
            {
                "q": -6,
                "r": -2,
                "p": ""
            },
            {
                "q": -6,
                "r": -1,
                "p": ""
            },
            {
                "q": -6,
                "r": 0,
                "p": ""
            },
            {
                "q": -6,
                "r": 1,
                "p": ""
            },
            {
                "q": -6,
                "r": 2,
                "p": ""
            },
            {
                "q": -6,
                "r": 3,
                "p": ""
            },
            {
                "q": -6,
                "r": 4,
                "p": ""
            },
            {
                "q": -6,
                "r": 5,
                "p": ""
            },
            {
                "q": -6,
                "r": 6,
                "p": ""
            },
            {
                "q": -6,
                "r": 7,
                "p": ""
            },
            {
                "q": -6,
                "r": 8,
                "p": ""
            },
            {
                "q": -6,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -6,
                "r": 10,
                "p": "Q0"
            },
            {
                "q": -5,
                "r": -5,
                "p": "K2"
            },
            {
                "q": -5,
                "r": -4,
                "p": "P2"
            },
            {
                "q": -5,
                "r": -3,
                "p": ""
            },
            {
                "q": -5,
                "r": -2,
                "p": ""
            },
            {
                "q": -5,
                "r": -1,
                "p": ""
            },
            {
                "q": -5,
                "r": 0,
                "p": ""
            },
            {
                "q": -5,
                "r": 1,
                "p": ""
            },
            {
                "q": -5,
                "r": 2,
                "p": ""
            },
            {
                "q": -5,
                "r": 3,
                "p": ""
            },
            {
                "q": -5,
                "r": 4,
                "p": ""
            },
            {
                "q": -5,
                "r": 5,
                "p": ""
            },
            {
                "q": -5,
                "r": 6,
                "p": ""
            },
            {
                "q": -5,
                "r": 7,
                "p": ""
            },
            {
                "q": -5,
                "r": 8,
                "p": ""
            },
            {
                "q": -5,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -5,
                "r": 10,
                "p": "K0"
            },
            {
                "q": -4,
                "r": -6,
                "p": "Q2"
            },
            {
                "q": -4,
                "r": -5,
                "p": "P2"
            },
            {
                "q": -4,
                "r": -4,
                "p": ""
            },
            {
                "q": -4,
                "r": -3,
                "p": ""
            },
            {
                "q": -4,
                "r": -2,
                "p": ""
            },
            {
                "q": -4,
                "r": -1,
                "p": ""
            },
            {
                "q": -4,
                "r": 0,
                "p": ""
            },
            {
                "q": -4,
                "r": 1,
                "p": ""
            },
            {
                "q": -4,
                "r": 2,
                "p": ""
            },
            {
                "q": -4,
                "r": 3,
                "p": ""
            },
            {
                "q": -4,
                "r": 4,
                "p": ""
            },
            {
                "q": -4,
                "r": 5,
                "p": ""
            },
            {
                "q": -4,
                "r": 6,
                "p": ""
            },
            {
                "q": -4,
                "r": 7,
                "p": ""
            },
            {
                "q": -4,
                "r": 8,
                "p": ""
            },
            {
                "q": -4,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -4,
                "r": 10,
                "p": "B0"
            },
            {
                "q": -3,
                "r": -7,
                "p": "R2"
            },
            {
                "q": -3,
                "r": -6,
                "p": "P2"
            },
            {
                "q": -3,
                "r": -5,
                "p": ""
            },
            {
                "q": -3,
                "r": -4,
                "p": ""
            },
            {
                "q": -3,
                "r": -3,
                "p": ""
            },
            {
                "q": -3,
                "r": -2,
                "p": ""
            },
            {
                "q": -3,
                "r": -1,
                "p": ""
            },
            {
                "q": -3,
                "r": 0,
                "p": ""
            },
            {
                "q": -3,
                "r": 1,
                "p": ""
            },
            {
                "q": -3,
                "r": 2,
                "p": ""
            },
            {
                "q": -3,
                "r": 3,
                "p": ""
            },
            {
                "q": -3,
                "r": 4,
                "p": ""
            },
            {
                "q": -3,
                "r": 5,
                "p": ""
            },
            {
                "q": -3,
                "r": 6,
                "p": ""
            },
            {
                "q": -3,
                "r": 7,
                "p": ""
            },
            {
                "q": -3,
                "r": 8,
                "p": ""
            },
            {
                "q": -3,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -3,
                "r": 10,
                "p": "N0"
            },
            {
                "q": -2,
                "r": -8,
                "p": "N2"
            },
            {
                "q": -2,
                "r": -7,
                "p": "P2"
            },
            {
                "q": -2,
                "r": -6,
                "p": ""
            },
            {
                "q": -2,
                "r": -5,
                "p": ""
            },
            {
                "q": -2,
                "r": -4,
                "p": ""
            },
            {
                "q": -2,
                "r": -3,
                "p": ""
            },
            {
                "q": -2,
                "r": -2,
                "p": ""
            },
            {
                "q": -2,
                "r": -1,
                "p": ""
            },
            {
                "q": -2,
                "r": 0,
                "p": ""
            },
            {
                "q": -2,
                "r": 1,
                "p": ""
            },
            {
                "q": -2,
                "r": 2,
                "p": ""
            },
            {
                "q": -2,
                "r": 3,
                "p": ""
            },
            {
                "q": -2,
                "r": 4,
                "p": ""
            },
            {
                "q": -2,
                "r": 5,
                "p": ""
            },
            {
                "q": -2,
                "r": 6,
                "p": ""
            },
            {
                "q": -2,
                "r": 7,
                "p": ""
            },
            {
                "q": -2,
                "r": 8,
                "p": ""
            },
            {
                "q": -2,
                "r": 9,
                "p": "P0"
            },
            {
                "q": -2,
                "r": 10,
                "p": "R0"
            },
            {
                "q": -1,
                "r": -9,
                "p": "B2"
            },
            {
                "q": -1,
                "r": -8,
                "p": "P2"
            },
            {
                "q": -1,
                "r": -7,
                "p": ""
            },
            {
                "q": -1,
                "r": -6,
                "p": ""
            },
            {
                "q": -1,
                "r": -5,
                "p": ""
            },
            {
                "q": -1,
                "r": -4,
                "p": ""
            },
            {
                "q": -1,
                "r": -3,
                "p": ""
            },
            {
                "q": -1,
                "r": -2,
                "p": ""
            },
            {
                "q": -1,
                "r": -1,
                "p": ""
            },
            {
                "q": -1,
                "r": 0,
                "p": ""
            },
            {
                "q": -1,
                "r": 1,
                "p": ""
            },
            {
                "q": -1,
                "r": 2,
                "p": ""
            },
            {
                "q": -1,
                "r": 3,
                "p": ""
            },
            {
                "q": -1,
                "r": 4,
                "p": ""
            },
            {
                "q": -1,
                "r": 5,
                "p": ""
            },
            {
                "q": -1,
                "r": 6,
                "p": ""
            },
            {
                "q": -1,
                "r": 7,
                "p": ""
            },
            {
                "q": -1,
                "r": 8,
                "p": ""
            },
            {
                "q": 0,
                "r": -8,
                "p": ""
            },
            {
                "q": 0,
                "r": -7,
                "p": ""
            },
            {
                "q": 0,
                "r": -6,
                "p": ""
            },
            {
                "q": 0,
                "r": -5,
                "p": ""
            },
            {
                "q": 0,
                "r": -4,
                "p": ""
            },
            {
                "q": 0,
                "r": -3,
                "p": ""
            },
            {
                "q": 0,
                "r": -2,
                "p": ""
            },
            {
                "q": 0,
                "r": -1,
                "p": ""
            },
            {
                "q": 0,
                "r": 0,
                "p": ""
            },
            {
                "q": 0,
                "r": 1,
                "p": ""
            },
            {
                "q": 0,
                "r": 2,
                "p": ""
            },
            {
                "q": 0,
                "r": 3,
                "p": ""
            },
            {
                "q": 0,
                "r": 4,
                "p": ""
            },
            {
                "q": 0,
                "r": 5,
                "p": ""
            },
            {
                "q": 0,
                "r": 6,
                "p": ""
            },
            {
                "q": 0,
                "r": 7,
                "p": ""
            },
            {
                "q": 0,
                "r": 8,
                "p": ""
            },
            {
                "q": 1,
                "r": -8,
                "p": ""
            },
            {
                "q": 1,
                "r": -7,
                "p": ""
            },
            {
                "q": 1,
                "r": -6,
                "p": ""
            },
            {
                "q": 1,
                "r": -5,
                "p": ""
            },
            {
                "q": 1,
                "r": -4,
                "p": ""
            },
            {
                "q": 1,
                "r": -3,
                "p": ""
            },
            {
                "q": 1,
                "r": -2,
                "p": ""
            },
            {
                "q": 1,
                "r": -1,
                "p": ""
            },
            {
                "q": 1,
                "r": 0,
                "p": ""
            },
            {
                "q": 1,
                "r": 1,
                "p": ""
            },
            {
                "q": 1,
                "r": 2,
                "p": ""
            },
            {
                "q": 1,
                "r": 3,
                "p": ""
            },
            {
                "q": 1,
                "r": 4,
                "p": ""
            },
            {
                "q": 1,
                "r": 5,
                "p": ""
            },
            {
                "q": 1,
                "r": 6,
                "p": ""
            },
            {
                "q": 1,
                "r": 7,
                "p": ""
            },
            {
                "q": 1,
                "r": 8,
                "p": "P5"
            },
            {
                "q": 1,
                "r": 9,
                "p": "B5"
            },
            {
                "q": 2,
                "r": -10,
                "p": "R3"
            },
            {
                "q": 2,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 2,
                "r": -8,
                "p": ""
            },
            {
                "q": 2,
                "r": -7,
                "p": ""
            },
            {
                "q": 2,
                "r": -6,
                "p": ""
            },
            {
                "q": 2,
                "r": -5,
                "p": ""
            },
            {
                "q": 2,
                "r": -4,
                "p": ""
            },
            {
                "q": 2,
                "r": -3,
                "p": ""
            },
            {
                "q": 2,
                "r": -2,
                "p": ""
            },
            {
                "q": 2,
                "r": -1,
                "p": ""
            },
            {
                "q": 2,
                "r": 0,
                "p": ""
            },
            {
                "q": 2,
                "r": 1,
                "p": ""
            },
            {
                "q": 2,
                "r": 2,
                "p": ""
            },
            {
                "q": 2,
                "r": 3,
                "p": ""
            },
            {
                "q": 2,
                "r": 4,
                "p": ""
            },
            {
                "q": 2,
                "r": 5,
                "p": ""
            },
            {
                "q": 2,
                "r": 6,
                "p": ""
            },
            {
                "q": 2,
                "r": 7,
                "p": "P5"
            },
            {
                "q": 2,
                "r": 8,
                "p": "N5"
            },
            {
                "q": 3,
                "r": -10,
                "p": "N3"
            },
            {
                "q": 3,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 3,
                "r": -8,
                "p": ""
            },
            {
                "q": 3,
                "r": -7,
                "p": ""
            },
            {
                "q": 3,
                "r": -6,
                "p": ""
            },
            {
                "q": 3,
                "r": -5,
                "p": ""
            },
            {
                "q": 3,
                "r": -4,
                "p": ""
            },
            {
                "q": 3,
                "r": -3,
                "p": ""
            },
            {
                "q": 3,
                "r": -2,
                "p": ""
            },
            {
                "q": 3,
                "r": -1,
                "p": ""
            },
            {
                "q": 3,
                "r": 0,
                "p": ""
            },
            {
                "q": 3,
                "r": 1,
                "p": ""
            },
            {
                "q": 3,
                "r": 2,
                "p": ""
            },
            {
                "q": 3,
                "r": 3,
                "p": ""
            },
            {
                "q": 3,
                "r": 4,
                "p": ""
            },
            {
                "q": 3,
                "r": 5,
                "p": ""
            },
            {
                "q": 3,
                "r": 6,
                "p": "P5"
            },
            {
                "q": 3,
                "r": 7,
                "p": "B5"
            },
            {
                "q": 4,
                "r": -10,
                "p": "R3"
            },
            {
                "q": 4,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 4,
                "r": -8,
                "p": ""
            },
            {
                "q": 4,
                "r": -7,
                "p": ""
            },
            {
                "q": 4,
                "r": -6,
                "p": ""
            },
            {
                "q": 4,
                "r": -5,
                "p": ""
            },
            {
                "q": 4,
                "r": -4,
                "p": ""
            },
            {
                "q": 4,
                "r": -3,
                "p": ""
            },
            {
                "q": 4,
                "r": -2,
                "p": ""
            },
            {
                "q": 4,
                "r": -1,
                "p": ""
            },
            {
                "q": 4,
                "r": 0,
                "p": ""
            },
            {
                "q": 4,
                "r": 1,
                "p": ""
            },
            {
                "q": 4,
                "r": 2,
                "p": ""
            },
            {
                "q": 4,
                "r": 3,
                "p": ""
            },
            {
                "q": 4,
                "r": 4,
                "p": ""
            },
            {
                "q": 4,
                "r": 5,
                "p": "P5"
            },
            {
                "q": 4,
                "r": 6,
                "p": "Q5"
            },
            {
                "q": 5,
                "r": -10,
                "p": "K3"
            },
            {
                "q": 5,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 5,
                "r": -8,
                "p": ""
            },
            {
                "q": 5,
                "r": -7,
                "p": ""
            },
            {
                "q": 5,
                "r": -6,
                "p": ""
            },
            {
                "q": 5,
                "r": -5,
                "p": ""
            },
            {
                "q": 5,
                "r": -4,
                "p": ""
            },
            {
                "q": 5,
                "r": -3,
                "p": ""
            },
            {
                "q": 5,
                "r": -2,
                "p": ""
            },
            {
                "q": 5,
                "r": -1,
                "p": ""
            },
            {
                "q": 5,
                "r": 0,
                "p": ""
            },
            {
                "q": 5,
                "r": 1,
                "p": ""
            },
            {
                "q": 5,
                "r": 2,
                "p": ""
            },
            {
                "q": 5,
                "r": 3,
                "p": ""
            },
            {
                "q": 5,
                "r": 4,
                "p": "P5"
            },
            {
                "q": 5,
                "r": 5,
                "p": "K5"
            },
            {
                "q": 6,
                "r": -10,
                "p": "Q3"
            },
            {
                "q": 6,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 6,
                "r": -8,
                "p": ""
            },
            {
                "q": 6,
                "r": -7,
                "p": ""
            },
            {
                "q": 6,
                "r": -6,
                "p": ""
            },
            {
                "q": 6,
                "r": -5,
                "p": ""
            },
            {
                "q": 6,
                "r": -4,
                "p": ""
            },
            {
                "q": 6,
                "r": -3,
                "p": ""
            },
            {
                "q": 6,
                "r": -2,
                "p": ""
            },
            {
                "q": 6,
                "r": -1,
                "p": ""
            },
            {
                "q": 6,
                "r": 0,
                "p": ""
            },
            {
                "q": 6,
                "r": 1,
                "p": ""
            },
            {
                "q": 6,
                "r": 2,
                "p": ""
            },
            {
                "q": 6,
                "r": 3,
                "p": "P5"
            },
            {
                "q": 6,
                "r": 4,
                "p": "R5"
            },
            {
                "q": 7,
                "r": -10,
                "p": "B3"
            },
            {
                "q": 7,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 7,
                "r": -8,
                "p": ""
            },
            {
                "q": 7,
                "r": -7,
                "p": ""
            },
            {
                "q": 7,
                "r": -6,
                "p": ""
            },
            {
                "q": 7,
                "r": -5,
                "p": ""
            },
            {
                "q": 7,
                "r": -4,
                "p": ""
            },
            {
                "q": 7,
                "r": -3,
                "p": ""
            },
            {
                "q": 7,
                "r": -2,
                "p": ""
            },
            {
                "q": 7,
                "r": -1,
                "p": ""
            },
            {
                "q": 7,
                "r": 0,
                "p": ""
            },
            {
                "q": 7,
                "r": 1,
                "p": ""
            },
            {
                "q": 7,
                "r": 2,
                "p": "P5"
            },
            {
                "q": 7,
                "r": 3,
                "p": "N5"
            },
            {
                "q": 8,
                "r": -10,
                "p": "N3"
            },
            {
                "q": 8,
                "r": -9,
                "p": "P3"
            },
            {
                "q": 8,
                "r": -8,
                "p": ""
            },
            {
                "q": 8,
                "r": -7,
                "p": ""
            },
            {
                "q": 8,
                "r": -6,
                "p": ""
            },
            {
                "q": 8,
                "r": -5,
                "p": ""
            },
            {
                "q": 8,
                "r": -4,
                "p": ""
            },
            {
                "q": 8,
                "r": -3,
                "p": ""
            },
            {
                "q": 8,
                "r": -2,
                "p": ""
            },
            {
                "q": 8,
                "r": -1,
                "p": ""
            },
            {
                "q": 8,
                "r": 0,
                "p": ""
            },
            {
                "q": 8,
                "r": 2,
                "p": "R5"
            },
            {
                "q": 9,
                "r": -10,
                "p": "B3"
            },
            {
                "q": 9,
                "r": -7,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -6,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -5,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -4,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -3,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -2,
                "p": "P4"
            },
            {
                "q": 9,
                "r": -1,
                "p": "P4"
            },
            {
                "q": 10,
                "r": -8,
                "p": "R4"
            },
            {
                "q": 10,
                "r": -7,
                "p": "N4"
            },
            {
                "q": 10,
                "r": -6,
                "p": "B4"
            },
            {
                "q": 10,
                "r": -5,
                "p": "K4"
            },
            {
                "q": 10,
                "r": -4,
                "p": "Q4"
            },
            {
                "q": 10,
                "r": -3,
                "p": "R4"
            },
            {
                "q": 10,
                "r": -2,
                "p": "N4"
            },
            {
                "q": 10,
                "r": -1,
                "p": "B4"
            }
        ],
        validMoves: [],
        selected: [],
        turn: 0
    }),
    actions: {
        clickHandler(q, r) {
            const hexIsValidMove = arrHasArr(this.validMoves, [q, r]);

            if (hexIsValidMove) {
                const hexMovingTo = getPiece(q, r, this.defaultBoard);
                const hexMovingFrom = getPiece(this.selected[0], this.selected[1], this.defaultBoard);
                // Move the piece there, and remove it from the original hex.
                hexMovingTo.p = hexMovingFrom.p;
                hexMovingFrom.p = "";

                const oldTurn = this.turn;
                this.incrementTurn();
                lerpBg(document.querySelector("#body"), oldTurn, this.turn);
            }
            // Clear selection and moves
            this.selected = [];
            this.validMoves = [];

            // If there's a piece in the hex clicked, show its valid moves, and select it
            const pieceClicked = getPiece(q, r, this.defaultBoard).p;
            if (pieceClicked && pieceClicked.charAt(1) == this.turn && !hexIsValidMove) {
                this.selected = [q, r];
                this.validMoves = getMoves6P(q, r, this.defaultBoard);
            }
        },
        incrementTurn() {
            this.turn++;
            if (this.turn === 6) {
                this.turn = 0;
            }
        }
    }
})